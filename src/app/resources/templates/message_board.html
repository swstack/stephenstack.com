<div class="container">
    <div class="row">
        <div class="col-lg-8 col-offset-2 col-msg-board" id="login-overlay">
            <div class="goto-section">
                <button class="btn" data-section="5" id="login-btn">
                    Login <span> </span> <i class="icon-circle-arrow-down"></i>
                </button>
            </div>
        </div>
    
        <div class="col-lg-8 col-offset-2 col-msg-board" id="cont-logged-in">
            <h2 style="color: #333333">Message Board</h2>
            <div id="contacts">
                <select>
                </select>
            </div>
            <div id="msg-board">
            </div>
            <div class="input-group msg-board-input">
                <span class="input-group-addon input-small" id="msg-submit">
                    <button class="btn">
                        <i class="icon-pencil" style="color: black"></i>
                    </button>
                </span>
			    <input type="text" class="input-large" id="msg-sub-input">
			</div>
        </div>
    </div>
</div>

<script type="text/javascript">

function MessageBoard (messages) {
	// experimenting with OO javascript
    this.messages = messages;
	
    this._msgDiv = function() {
    	return "<div class='alert'> \
    		          <img src=";
    	console.log(x);
    }
	
    this._displayMessage = function(msg) {
    	console.log(msg);
    	$("#msg-board").append(this._msgDiv(
    			));
    }
	
    this.update = function() {
    	console.log(this.messages);
    	for (var i = 0; i < this.messages.length; i++) {
    		this._displayMessage(this.messages[i]);
    	}
    };
}

$("#msg-submit").click(function(){
	console.log($("#msg-sub-input").val());
	$.ajax({
        type : 'POST',
        url : '/message',
        contentType : 'application/octet-stream; charset=utf-8',
        success : function() {
        	updateMessageBoard()
        },
        processData : false,
        data : JSON.stringify({
               "msg": $("#msg-sub-input").val(),
               }),
    });
});

function onLogin() {
    $("#cont-logged-in").fadeTo("fast", 1);
    $("#login-overlay").hide();
}

function onLogout() {
	$("#login-overlay").show();
	$("#cont-logged-in").fadeTo("fast", .2);
}

registerLoginCallback(onLogin);
registerLogoutCallback(onLogout);
</script>
