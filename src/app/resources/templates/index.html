{% extends "base.html" %}
{% block body %}
<!------------------ HEADER ---------------------->
<div class="row">
	<div class="span11 tabbable">
	    <ul class="nav nav-tabs">
	        <li class="active customtab"><a data-toggle="tab" href="#home">Home</a></li>
	        <li class="customtab"><a data-toggle="tab" href="#profile">Profile</a></li>
	        <li class="customtab"><a data-toggle="tab" href="#codes">Da Codes</a></li>
	        <li class="customtab"><a data-toggle="tab" href="#playground">Playground</a></li>
	        <li class="customtab"><a data-toggle="tab" href="#login">Login</a></li>
	    </ul>
	</div>
	<div class="span1">
	    {% if user %}
	       {{ user.name }}
	    {% endif %}
	</div>
</div>

<div class="tab-content row">
	<!------------------ TAB HOME ---------------------->
	<div id="home" class="tab-pane active">
	</div>
	
	<!------------------ TAB PROFILE ---------------------->
	<div id="profile" class="tab-pane">
	    <div class="span4">
	        <img border="0" src="/static/img/profile_picture.png">
	    </div>
	    <div class="span8">
	        <p>
	            {{ resume | safe }}
	        </p>
	   </div>
	</div>
	
	<!------------------ TAB DA CODES ---------------------->
	<div id="codes" class="tab-pane">
	</div>
	
	<!------------------ TAB PLAYGROUND ---------------------->
	<div id="playground" class="tab-pane">
		<h2>Testing and Development Playground</h2>
		<h5>Tool to peek into system state and aid testing and development.</h5>
		<table class="table table-striped table-bordered table-condensed">
		    <tr>
		        <th>Username</th><th>Password</th>
		    </tr>
		    {% for user in users %}
		        <tr>
		            <td> {{ user.username }}</td>
		            <td>{{ user.password }}</td>
		        </tr>
		    {% endfor %}
		</table>
	</div>
	
	<!------------------ TAB LOGIN ---------------------->
	<div id="login" class="tab-pane">
	    <h1>Login Form</h1>
	    <form id="login_form">
	        <input type="text" name="username" placeholder="username">
	        <input type="password" name="password" placeholder="password">
	        <span>
	            <label for="checkbox">remember</label>
	            <input type="checkbox" name="checkbox">
	        </span>
	        <input id="login_input" type="submit" value="login">
	    </form>
	    <div id="login_success" class="alert alert-success hide">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <h4>Welcome back</h4>
        </div>
        <div id="login_fail" class="alert alert-error hide">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <h4>Username already taken</h4>
        </div>
	</div>
</div>
{% endblock %}

{% block js %}
<script>
$("#login").click(function() {
    var url = "/login";
    $.ajax({
           type: "POST",
           url: url,
           data: $("#login_form").serialize(),
           success: function(success) {
               if (success) {
            	   $("#login_success").show();
            	   $("#login_success").fadeOut(5000);
               } else {
            	   $("#login_fail").show();
            	   $("#login_fail").fadeOut(5000);
               }
           },
    });
});
</script>
{% endblock %}
